<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Rice Crop Stages - Smart Farming</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <video id="bg-video" autoplay muted loop>
    <source src="{{ url_for('static', filename='videos/farm-bg.mp4') }}" type="video/mp4">
    Your browser does not support the video tag.
  </video>

  <div class="navbar">
    <h1>SMART FARMING – Rice Crop Stages</h1>
    <div>
      <a href="{{ url_for('soil_types') }}">Soil Types</a>
      <a href="{{ url_for('rice_stages') }}">Rice Stages</a>
      <a href="{{ url_for('export') }}">Export CSV</a>
      <a href="{{ url_for('district_info') }}">District Info</a>
      <a href="{{ url_for('logout') }}">Logout</a>
      <a href="{{ url_for('dashboard') }}">Back to Dashboard</a>
      <button id="toggle-mode">Toggle Mode</button>
    </div>
  </div>

  <div class="container mt-5 mb-5">
    <div id="riceCarousel" class="carousel slide" data-bs-ride="carousel">
      <div class="carousel-inner">
        {% set rice_stages = [
          {
            "name": "Germination and Seedling Stage",
            "image": "rice_stage1.png",
            "description": "The seed absorbs water and begins to grow.",
            "details": [
              "Duration: 0–14 days",
              "Roots grow down into the soil.",
              "Shoots grow up towards the surface.",
              "A small green plant (called a seedling) appears."
            ]
          },
          {
            "name": "Early Vegetative",
            "image": "rice_stage2.png",
            "description": "The first few leaves grow on the plant.",
            "details": [
              "Duration: 2–4 weeks",
              "The plant starts to form tillers (small side shoots), which help produce more grains later."
            ]
          },
          {
            "name": "Late Vegetative",
            "image": "rice_stage3.png",
            "description": "This is the rapid growth stage.",
            "details": [
              "Duration: 4–6 weeks",
              "The plant becomes bushy because it makes more tillers.",
              "The roots, stems, and leaves grow stronger and bigger."
            ]
          },
          {
            "name": "Panicle Initiation (PI)",
            "image": "rice_stage4.png",
            "description": "The main growing part of the plant changes—instead of leaves, it starts forming a panicle (flower cluster that will hold grains).",
            "details": [
              "This is an important time to add fertilizer for better yield."
            ]
          },
          {
            "name": "Flowering (Anthesis)",
            "image": "rice_stage5.png",
            "description": "Rice flowers open for a few hours and release pollen.",
            "details": [
              "This is a very delicate stage—too much heat or no water can damage the grains."
            ]
          },
          {
            "name": "Milk Stage",
            "image": "rice_stage6.png",
            "description": "The grains are filled with a white, milky liquid.",
            "details": [
              "They are still soft."
            ]
          },
          {
            "name": "Dough Stage",
            "image": "rice_stage7.jpg",
            "description": "The milky inside becomes thicker, like dough.",
            "details": [
              "Grains are firm but not hard yet."
            ]
          },
          {
            "name": "Mature Grain / Harvest Stage",
            "image": "rice_stage8.jpg",
            "description": "The grains become hard and golden.",
            "details": [
              "When 80-90% of the grains are fully mature, the plant is ready for harvest."
            ]
          }
        ] %}

        {% for stage in rice_stages %}
        <div class="carousel-item {% if loop.first %}active{% endif %}">
          <div class="card mx-auto shadow-lg p-4 mb-5 bg-white rounded" style="max-width: 1000px;">
            <div class="row g-0 align-items-center">
              <div class="col-md-5">
                <img src="{{ url_for('static', filename='images/stages/' + stage.image) }}" class="img-fluid rounded-start" alt="{{ stage.name }}">
              </div>
              <div class="col-md-7 d-flex align-items-center">
                <div class="card-body">
                  <h3 class="card-title">{{ stage.name }}</h3>
                  <p class="card-text">{{ stage.description }}</p>
                  <h5>Stage Details:</h5>
                  <ul>
                    {% for detail in stage.details %}
                      <li>{{ detail }}</li>
                    {% endfor %}
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>

      <button class="carousel-control-prev" type="button" data-bs-target="#riceCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#riceCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
      </button>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    document.getElementById('toggle-mode').addEventListener('click', () => {
      document.body.classList.toggle('dark-mode');
    });
  </script>
</body>
</html>
